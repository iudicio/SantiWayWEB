# RabbitMQ
Стартует брокер сообщений RAbbitMQ, который доступен по адресу: ampq://name:password@IP:port/vhost
- **name**, **password**, **vhost** задаются в файле definitions.json
- **port** задается в файле rabbitmq.conf

## definitions.json
- **users** объявляет пользователей RabbitMQ и их теги
- **vhosts** объявляет виртуальные хосты. Мини-серверы. Воркеры присоединенные к разным виртуальным хостам не могут взаимодействовать друг с другом
- **permisions** объявляет правила, которыми обладает пользователь в определенном виртуальном хосте

## rabbitmq.conf
- **loopback_users.guest** определяет доступ. При false к RabbitMQ можно получить доступ ТОЛЬКО из локальной сети.
- **listeners.tcp.default** определяет порт, по которому мы можем попасть в веб интерфейс RabbitMQ.
- **management.listener.port** определяет порт, по которому consumers будут общаться с RabbitMQ
- **management.load_definitions** указывает путь к definitions.json

## Принцип работы RabbitMQ
- Consumers (обработчики сообщений) подписываются на определенные именнованные очереди (RabbitMQ сам создает эти очереди при подписке)
- Publishers (публикаторы сообщений) отправляют сообщения в RabbitMQ
- Как только в очередь поступает сообщение, RabbitMQ пушит это сообщение одному из consumers. Если сообщений много, то они равномерно распределяются между consumers
- Consumers могут после обработки как не возвращать сообщения в RabbitMQ (например микросервис записи в БД), так и вернуть сообщение в другую очередь, тогда consumer становится еще и publisher

# Важное замечание
В очередь поступают tasks, которые имеют свои имена. Consumers будут обрабатывать только те tasks в очереди, на имена которых они настроены. Если в очередь queue придет task с именем bd, а consumer слушает эту очередь и обрабатывает tasks с именем reload, то он не будет обрабатывать эту task
